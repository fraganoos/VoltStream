<Page
    x:Class="VoltStream.WPF.Payments.Views.PaymentEditPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:VoltStream.WPF.Commons.UserControls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:utils="clr-namespace:VoltStream.WPF.Commons.Utils"
    Title="To'lovni tahrirlash"
    d:DesignHeight="450"
    d:DesignWidth="950"
    mc:Ignorable="d">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!-- Yuqori qism -->
		<Grid Grid.Row="0" Margin="10">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="350" />
				<ColumnDefinition Width="*" />
			</Grid.ColumnDefinitions>

			<!-- Chap tomon -->
			<Grid Grid.Column="0">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>

				<Label Grid.Row="0" Content="Sana:" VerticalAlignment="Center" FontSize="14" Margin="5,0,0,0" />
				<Label Grid.Row="1" Content="Mijoz:" VerticalAlignment="Center" FontSize="14" Margin="5,0,0,0" />
				<Label Grid.Row="2" Content="Val. turi:" VerticalAlignment="Center" FontSize="14" Margin="5,0,0,0" />
				<controls:UserCalendar
                        Grid.Column="1"
                        Width="150"
                        Margin="5,5,30,5"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        utils:EnterKeyTab.IsEnabled="True"
                        FontSize="14"
                        SelectedDate="{Binding Payment.PaidAt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
				

				<ComboBox
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="5"
                    DisplayMemberPath="Name"
                    FontSize="14"
                    IsEditable="False"
                    IsEnabled="False"
                    ItemsSource="{Binding Customers}"
                    SelectedItem="{Binding Payment.Customer}" />

				<Grid Grid.Row="2" Grid.Column="1">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="70" />
					</Grid.ColumnDefinitions>

					<ComboBox
                        Margin="5"
                        DisplayMemberPath="Name"
                        FontSize="14"
                        IsEditable="False"
                        IsEnabled="False"
                        ItemsSource="{Binding Currencies}"
                        SelectedItem="{Binding Payment.Currency}" />

					<TextBlock
                        Grid.Column="1"
                        Margin="20,2,5,2"
                        VerticalAlignment="Center"
                        FontSize="14"
                        Text="kurs /(%)" />

					<TextBox
                        Grid.Column="2"
                        Margin="5,2"
                        FontSize="14"
                        IsEnabled="{Binding Payment.Currency.IsEditable}"
                        Text="{Binding Payment.ExchangeRate}"
                        utils:NumericTextBox.IsNumeric="True" />
				</Grid>
			</Grid>

			<!-- O'ng tomon -->
			<Grid Grid.Column="1">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="210" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>

				<Grid Grid.Column="0">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto" />
						<RowDefinition Height="Auto" />
						<RowDefinition Height="Auto" />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>

					<Label Content="Summa:" FontSize="12" FontStyle="Italic" Foreground="#888" Margin="5,0,0,0" VerticalAlignment="Center" />
					<Label Grid.Row="1" Content="Kirim:" FontSize="14" Margin="5,0,0,0" VerticalAlignment="Center" />
					<Label Grid.Row="2" Content="Chiqim:" FontSize="14" Margin="5,0,0,0" VerticalAlignment="Center" />

					<TextBox
                        Grid.Column="1"
                        Margin="5,2"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="14"
                        FontStyle="Italic"
                        IsReadOnly="True"
                        IsTabStop="False"
                        Text="{Binding Payment.Amount, StringFormat=N2}"
                        utils:NumericTextBox.IsNumeric="True" />

					<TextBox
                        Grid.Row="1"
                        Grid.Column="1"
                        Margin="5,2"
                        FontSize="14"
                        IsEnabled="{Binding Payment.IsIncomeEnabled}"
                        Text="{Binding Payment.IncomeAmount}"
                        utils:NumericTextBox.IsNumeric="True" />

					<TextBox
                        Grid.Row="2"
                        Grid.Column="1"
                        Margin="5,2"
                        FontSize="14"
                        IsEnabled="{Binding Payment.IsExpenseEnabled}"
                        Text="{Binding Payment.ExpenseAmount}"
                        utils:NumericTextBox.IsNumeric="True" />
				</Grid>

				<Grid Grid.Column="1">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto" />
						<RowDefinition Height="Auto" />
					</Grid.RowDefinitions>

					<Grid Grid.Row="0">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto" />
							<ColumnDefinition Width="Auto" />
							<ColumnDefinition Width="Auto" />
							<ColumnDefinition Width="Auto" />
						</Grid.ColumnDefinitions>

						<TextBlock Text="Balans:" FontSize="12" FontStyle="Italic" Foreground="#888" Margin="5,0,0,0" VerticalAlignment="Center" />
						<TextBox
                            Grid.Column="1"
                            Margin="5,2"
                            Background="Transparent"
                            BorderThickness="0"
                            FontSize="14"
                            FontStyle="Italic"
                            IsReadOnly="True"
                            Text="{Binding BeginBalance, StringFormat=N2}"
                            utils:NumericTextBox.IsNumeric="True" />

						<TextBlock Grid.Column="2" Text="Natija:" FontSize="12" FontStyle="Italic" Foreground="#888" Margin="5,0,0,0" VerticalAlignment="Center" />
						<TextBox
                            Grid.Column="3"
                            Margin="5,2"
                            Background="Transparent"
                            BorderThickness="0"
                            FontSize="14"
                            FontStyle="Italic"
                            IsReadOnly="True"
                            Text="{Binding LastBalance, StringFormat=N2}"
                            utils:NumericTextBox.IsNumeric="True" />
					</Grid>

					<Grid Grid.Row="1">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="60" />
							<ColumnDefinition Width="*" />
						</Grid.ColumnDefinitions>

						<Label Content="Izox:" FontSize="14" Margin="5,0,11,0" VerticalAlignment="Center" />
						<TextBox
                            Grid.Column="1"
                            Margin="5,2"
                            FontSize="14"
                            Text="{Binding Payment.Description}" />
					</Grid>
				</Grid>
			</Grid>
		</Grid>

		<!-- Pastki qism - tugmalar -->
		<Grid Grid.Row="2" Margin="10">
			<StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
				<Button
                    Margin="0,0,6,0"
                    Padding="20,5"
                    Background="#E74C3C"
                    Command="{Binding CancelCommand}"
                    Content="Bekor qilish"
                    FontSize="14"
                    Foreground="White" />

				<Button
                    Padding="20,5"
                    Background="#27AE60"
                    Command="{Binding SaveCommand}"
                    Content="Saqlash"
                    FontSize="14"
                    Foreground="White" />
			</StackPanel>
		</Grid>
	</Grid>
</Page>