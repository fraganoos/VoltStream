<UserControl x:Class="VoltStream.WPF.Settings.Views.Modules.CurrencySettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:VoltStream.WPF.Settings.ViewModels"
             xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Header -->
            <RowDefinition Height="*" />
            <!-- Scrollable list -->
            <RowDefinition Height="Auto" />
            <!-- Buttons -->
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0"
                BorderBrush="LightGray"
                BorderThickness="1"
                CornerRadius="6"
                Padding="10"
                Margin="0 5 17 0"
                Background="White"
                SnapsToDevicePixels="True">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="90" />
                </Grid.ColumnDefinitions>

                <TextBlock Text="Odatiy"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="Faol"
                           FontWeight="SemiBold"
                           Grid.Column="1"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="Naqd"
                           FontWeight="SemiBold"
                           Grid.Column="2"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="O'zgaruvchan"
                           FontWeight="SemiBold"
                           Grid.Column="3"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="Nomi"
                           FontWeight="SemiBold"
                           Grid.Column="4"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="Kodi"
                           Grid.Column="5"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="Belgisi"
                           Grid.Column="6"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="Kurs"
                           Grid.Column="7"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />

                <TextBlock Text="Amallar"
                           Grid.Column="8"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />
            </Grid>
        </Border>

        <!-- Scrollable valyuta ro‘yxati -->
        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto"
                      Margin="0,5">
            <ItemsControl ItemsSource="{Binding Currencies}"
                          AllowDrop="True"
                          Drop="ItemsControl_Drop">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="LightGray"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="10"
                                Margin="0,5"
                                Background="White"
                                SnapsToDevicePixels="True">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                
                                <fa:IconImage Icon="GripVertical"
                                              Width="16"
                                              Height="16"
                                              Cursor="SizeAll"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Left"
                                              Margin="4"
                                              MouseDown="DragHandle_MouseDown"
                                              MouseMove="DragHandle_MouseMove"
                                              MouseUp="DragHandle_MouseUp"
                                              ToolTip="Joyini o‘zgartirish" />
                                
                                <RadioButton GroupName="DefaultCurrency"
                                             IsChecked="{Binding IsDefault}"
                                             IsEnabled="{Binding IsActive}"
                                             ToolTip="Default valyuta"
                                             HorizontalAlignment="Center"
                                             VerticalAlignment="Center">
                                    <RadioButton.Resources>
                                        <Style TargetType="Ellipse">
                                            <Setter Property="Width"
                                                    Value="12" />
                                            <Setter Property="Height"
                                                    Value="12" />
                                        </Style>
                                    </RadioButton.Resources>
                                </RadioButton>

                                <CheckBox IsChecked="{Binding IsActive}"
                                          Grid.Column="1"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Command="{Binding GetMiddlemanCommand}" />

                                <CheckBox IsChecked="{Binding IsCash}"
                                          Grid.Column="2"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Command="{Binding GetMiddlemanCommand}" />

                                <CheckBox IsChecked="{Binding IsEditable}"
                                          Grid.Column="3"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Command="{Binding GetMiddlemanCommand}" />

                                <TextBox Text="{Binding Name}"
                                         BorderThickness="0"
                                         HorizontalAlignment="Center"
                                         Grid.Column="4" />

                                <TextBox Text="{Binding Code}"
                                         BorderThickness="0"
                                         HorizontalAlignment="Center"
                                         Grid.Column="5" />

                                <TextBox Text="{Binding Symbol}"
                                         BorderThickness="0"
                                         HorizontalAlignment="Center"
                                         Grid.Column="6" />

                                <TextBox Text="{Binding ExchangeRate}"
                                         BorderThickness="0"
                                         HorizontalAlignment="Center"
                                         Grid.Column="7" />

                                <Button Content="O‘chirish"
                                        Grid.Column="8"
                                        HorizontalAlignment="Center"
                                        BorderThickness="0"
                                        Command="{Binding DataContext.RemoveCurrencyCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        CommandParameter="{Binding}"
                                        Background="Tomato"
                                        Foreground="White"
                                        Width="80"
                                        Padding="5 "
                                        ToolTip="Valyutani o‘chirish" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Qo‘shish va Saqlash tugmalari -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,10,0,0">
            <Button Content="Valyuta qo‘shish"
                    Command="{Binding AddCurrencyCommand}"
                    Width="140"
                    Height="35"
                    Background="#007ACC"
                    Foreground="White"
                    FontWeight="SemiBold">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5"
                                BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="10,2" />
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>

            <Button Content="Saqlash"
                    Command="{Binding SaveCurrenciesCommand}"
                    Width="140"
                    Height="35"
                    Margin="15 0 0 0"
                    Background="ForestGreen"
                    Foreground="White"
                    FontWeight="SemiBold">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5"
                                BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="10,2" />
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </StackPanel>
    </Grid>
</UserControl>
