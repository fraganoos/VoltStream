<UserControl x:Class="VoltStream.WPF.Settings.Views.Modules.CategorySettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:VoltStream.WPF.Settings.ViewModels"
             xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
	<Grid Margin="20">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" />
			<ColumnDefinition Width="300" />
		</Grid.ColumnDefinitions>

		<!-- Main Content -->
		<Grid Grid.Column="0" Margin="0,0,20,0">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<!-- Header -->
			<Border Grid.Row="0"
                    BorderBrush="LightGray"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="10"
                    Margin="0,0,0,10"
                    Background="White"
                    SnapsToDevicePixels="True">
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="50" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="100" />
					</Grid.ColumnDefinitions>

					<TextBlock Text="ID" FontWeight="SemiBold" HorizontalAlignment="Center"/>
					<TextBlock Grid.Column="1" Text="Nomi" FontWeight="SemiBold" Margin="10,0,0,0"/>
					<TextBlock Grid.Column="2" Text="Amallar" FontWeight="SemiBold" HorizontalAlignment="Center"/>
				</Grid>
			</Border>

			<!-- List -->
			<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
				<ItemsControl ItemsSource="{Binding Categories}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border BorderBrush="#DDDDDD"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="10"
                                    Margin="0,0,0,5"
                                    Background="White">
								<Grid>
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="50" />
										<ColumnDefinition Width="*" />
										<ColumnDefinition Width="100" />
									</Grid.ColumnDefinitions>

									<TextBlock Text="{Binding Id}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="{Binding Name}" VerticalAlignment="Center" Margin="10,0,0,0" FontSize="14"/>

									<StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Center">
										<Button Command="{Binding DataContext.EditCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                                CommandParameter="{Binding}"
                                                Margin="0,0,5,0"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                ToolTip="Tahrirlash">
											<fa:IconImage Icon="Pen" Foreground="#0A003A" Width="14" Height="14"/>
										</Button>
										<Button Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                                CommandParameter="{Binding}"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                ToolTip="O'chirish">
											<fa:IconImage Icon="Trash" Foreground="Red" Width="14" Height="14"/>
										</Button>
									</StackPanel>
								</Grid>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ScrollViewer>
		</Grid>

		<!-- Sidebar form (Same as before) -->
		<Border Grid.Column="1" 
                BorderThickness="1" 
                BorderBrush="#DDDDDD" 
                Background="#F9F9F9" 
                CornerRadius="5" 
                Padding="15"
                VerticalAlignment="Top">
			<StackPanel>
				<ContentControl Content="{Binding IsEditing}">
					<ContentControl.Style>
						<Style TargetType="ContentControl">
							<Setter Property="ContentTemplate">
								<Setter.Value>
									<DataTemplate>
										<TextBlock Text="Yangi qo'shish" FontSize="18" FontWeight="Bold" Margin="0,0,0,15" Foreground="#0A003A"/>
									</DataTemplate>
								</Setter.Value>
							</Setter>
							<Style.Triggers>
								<DataTrigger Binding="{Binding}" Value="True">
									<Setter Property="ContentTemplate">
										<Setter.Value>
											<DataTemplate>
												<TextBlock Text="Tahrirlash" FontSize="18" FontWeight="Bold" Margin="0,0,0,15" Foreground="#0A003A"/>
											</DataTemplate>
										</Setter.Value>
									</Setter>
								</DataTrigger>
							</Style.Triggers>
						</Style>
					</ContentControl.Style>
				</ContentControl>

				<TextBlock Text="Nomi" Margin="0,0,0,5" Foreground="Gray"/>
				<TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" 
                         Padding="5" 
                         FontSize="14" 
                         BorderBrush="#CCCCCC"/>

				<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
					<Button Content="Bekor qilish" 
                            Command="{Binding CancelCommand}" 
                            Margin="0,0,10,0"
                            Width="100"
                            Height="30"
                            Background="Gray"
                            Foreground="White"
                            BorderThickness="0">
						<Button.Template>
							<ControlTemplate TargetType="Button">
								<Border Background="{TemplateBinding Background}" CornerRadius="3">
									<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
								</Border>
							</ControlTemplate>
						</Button.Template>
					</Button>

					<Button Content="Saqlash" 
                            Command="{Binding SaveCommand}" 
                            Width="100"
                            Height="30"
                            Background="#0A003A"
                            Foreground="White"
                            BorderThickness="0">
						<Button.Template>
							<ControlTemplate TargetType="Button">
								<Border Background="{TemplateBinding Background}" CornerRadius="3">
									<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
								</Border>
							</ControlTemplate>
						</Button.Template>
					</Button>
				</StackPanel>
			</StackPanel>
		</Border>
	</Grid>
</UserControl>
